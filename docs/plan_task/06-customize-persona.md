To modify the planning process, you will be interacting with **three key components** within the `src/alfred_new/` directory structure.

---

### **Component 1: The Persona Definition (`planning.yml`)**

This file is the "soul" of the planning tool. It defines the persona's identity and core principles.

*   **File Location:** `src/alfred_new/personas/planning.yml`
*   **Purpose:** To define the high-level personality traits and conversational style of "Alex, the Solution Architect."
*   **What to Change Here:**
    *   **`name` & `title`:** To change the persona's name and job title.
    *   **`greeting`:** To change the initial introductory message. This is where you can add flair or change the tone from formal to casual.
    *   **`communication_style`:** To modify the core personality. For example, changing this to "Blunt, direct, and focused on speed over process" would dramatically alter how the AI communicates.
    *   **`thinking_methodology`:** This is the most powerful lever for changing *how* the AI plans. Adding a principle like `"Always suggest at least two alternative strategies"` would fundamentally change the output of the `strategize` phase.

**Example Change:** To make Alex more informal and direct.

*   **Change `greeting` to:** `"Alright, let's get this done. I'm Alex. I'll handle the plan so you can focus on coding. What's the task?"`
*   **Change `communication_style` to:** `"Direct and to-the-point. I skip the pleasantries and focus on clear, actionable technical details."`

---
### **Component 2: The Prompt Templates (`templates/prompts/plan_task/*.md`)**

These files are the "scripts" for the persona. They define the specific instructions and conversational beats for each state of the planning State Machine.

*   **File Location:** `src/alfred_new/templates/prompts/plan_task/`
*   **Purpose:** To control the exact dialogue and directives given to the AI at each step of the planning process.
*   **What to Change Here:**
    *   **To change the conversational text:** Modify the human-readable text at the beginning of each template. For example, in `contextualize.md`, you could change `"I am beginning the planning process..."` to `"Okay, first things first, I need to understand the lay of the land..."`.
    *   **To change the AI's instructions (The Directive):** This is where you modify the core logic. For example, if you wanted the AI to *also* check for `.env` files during context gathering, you would add that instruction to the `Directive` section of `contextualize.md`.
    *   **To change the required output format:** Modify the `Required Artifact Structure` section. For example, if you wanted to add a `confidence_score` field to the `StrategyArtifact`, you would add it to the example JSON in `strategize.md`. (This would also require a corresponding change to the Pydantic model).

**Example Change:** To make the strategy phase more collaborative.

*   **Edit `strategize.md`:**
    *   Change the `Directive` to say: `"Based on the context, develop **two distinct technical strategies** and present them as options. For each, list the pros and cons."`
    *   Update the `Required Artifact Structure` to reflect this new requirement (e.g., a list of strategy objects).

---
### **Component 3: The Artifact Templates (`templates/artifacts/*.md`)**

These files are the "meeting minutes." They define how the structured data artifacts generated by the AI are formatted into a clean, human-readable report in the `scratchpad.md`.

*   **File Location:** `src/alfred_new/templates/artifacts/`
*   **Purpose:** To control the visual presentation of the completed work for each step.
*   **What to Change Here:**
    *   **Change headings and formatting:** You can change `## Strategy Overview` in `strategy.md` to `### Alex's Proposed Strategy:` to give it more personality.
    *   **Add or remove information:** If you decide you don't want to see the `risk_analysis` in the scratchpad, you can simply remove the `{% if artifact.risk_analysis %}` block from `strategy.md`.
    *   **Change the layout:** You could change a bulleted list into a table, or vice-versa, to improve readability.

**Example Change:** To create a more compact scratchpad.

*   **Edit `context_analysis.md`:**
    *   Combine "Affected Components" and "Clarification Requirements" under a single `## Key Findings` heading to reduce vertical space.

---
### **Summary of the Customization Workflow**

1.  **For high-level personality and thinking style:** Modify `planning.yml`.
2.  **For specific instructions and dialogue at each step:** Modify the relevant `.md` file in `templates/prompts/plan_task/`.
3.  **For the final, human-readable report of each step:** Modify the relevant `.md` file in `templates/artifacts/`.

This three-part system gives you complete, granular control over the entire planning experience, from the persona's core identity down to the final formatting of the output, all without needing to touch the core Python logic of the State Machine or the tool implementations.
