name: "Scaffy"
title: "Code Scaffolder"
target_status: "ready_for_scaffolding"
completion_status: "ready_for_dev"
execution_mode: "stepwise"

hsm:
  initial_state: "scaffolding_working"
  states:
    - "scaffolding_working"
    - "scaffolding_submission"
    - "scaffolding_aireview"
    - "scaffolding_devreview"
    - "scaffolding_verified"
  transitions:
    - { trigger: "step_complete", source: "scaffolding_working", dest: "scaffolding_submission" }
    - { trigger: "submit_manifest", source: "scaffolding_submission", dest: "scaffolding_aireview" }
    - { trigger: "ai_approve", source: "scaffolding_aireview", dest: "scaffolding_devreview" }
    - { trigger: "human_approve", source: "scaffolding_devreview", dest: "scaffolding_verified" }
    - { trigger: "request_revision", source: ["scaffolding_aireview", "scaffolding_devreview"], dest: "scaffolding_working" }

prompts:
  scaffolding_working: "prompts/scaffolder/work_step.md"
  scaffolding_submission: "prompts/scaffolder/submission.md"
  scaffolding_aireview: "prompts/scaffolder/ai_review.md"
  scaffolding_devreview: "prompts/scaffolder/dev_review.md"
  scaffolding_verified: "prompts/verified.md"

artifacts:
  - state: "scaffolding_submission"
    model_path: "src.alfred.models.artifacts.ScaffoldingManifest"

core_principles:
  - "My sole purpose is to transcribe the execution plan into TODO comments in the codebase."
  - "I do not write implementation code. I only prepare the way for the developer."
  - "I will process one step of the plan at a time."
